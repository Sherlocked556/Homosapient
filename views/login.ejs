<%include ./partials/header%>
<div class="ui main text container segment">
    <div class="ui huge header">LOGIN</div>
<form action="/login" method="post" class="ui form">
        <div class="field">  <input type="password"id="password" name="password" placeholder="Enter login key"></div>   
    <input type="submit" value="login" class="ui violet basic button big">
</form>
</div>
</body>
<script>
    $('form').submit(function(event) {
        console.log("triggered")
// get the form data
// there are many ways to get this data using jQuery (you can use the class or id also)
var formData = {
    'password'              : $('#password').val(),
   
};

// process the form
$.ajax({
    type        : 'POST', // define the type of HTTP verb we want to use (POST for our form)
    url         : '/login', // the url where we want to POST
    data        : formData, // our data object
    dataType    : 'json', // what type of data do we expect back from the server
                encode          : true
})
    // using the done promise callback
    .done(function(data) {
        console.log("here")
        // log data to the console so we can see
        console.log(data); 
        window.location.assign('/blogs')

        // here we will handle errors and validation messages
    }).fail((err)=>
    {
        alert("incorrect key")
       
    });

// stop the form from submitting the normal way and refreshing the page
event.preventDefault();
});
</script>
<%include ./partials/footer%>